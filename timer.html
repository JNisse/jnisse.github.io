<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timer</title>
	<style>
	body {
	text-align: center;
	}
	
p {
	font: 64px / 1.5 system-ui;
}
</style>
</head>
<body>
<h1> Timer i JavaScript</h1>
<input type="text" placeholder="Format:1m15s" pattern="[0-9]{1,3}m?([0-9][0-9]s)?">
<button id="StartTimer">Starta Timer </button>
<p>-</p>
<script> 
let timer;

let btn = document.getElementById("StartTimer");
let title = document.querySelector("title");
btn.addEventListener("click",startTimer);
let timeLeft;
function startTimer(){
timeLeft = parseTime(document.querySelector("input").value);
if (isNaN(timeLeft) || timeLeft <=0){
	alert("DÃ¥ligt Format");
	}
else{
	//document.querySelector("p").innerHTML = parseTime(timeLeft);
	document.querySelector("input").value= "";
	timer = setInterval(tickTimer,1000);
	setTimeout(() =>{clearInterval(timer);title.innerHTML = "Timer";alert("Times up");},(timeLeft+1)*1000);
	
	}
}
function tickTimer(){
	let timeTag = document.querySelector("p");
	timeLeft--;
	const timeString = timeLeft > 60 ? Math.floor(timeLeft/60)+"m"+(timeLeft%60)+"s" : timeLeft +"s";
	timeTag.innerHTML = timeString;
	title.innerHTML = "Timer | "+ timeString;
	}
function parseTime(time){
minutePos = time.indexOf("m");
secondPos = time.indexOf("s");
console.log(time);
let parsedTime = 0;
if (minutePos != -1) parsedTime += 60*parseInt(time.slice(0,minutePos));
if (secondPos != -1) parsedTime += parseInt(time.slice(minutePos+1,secondPos));
console.log(parsedTime);
return parsedTime
}
</script>
</body>
</html>